# AcmeX v0.7.0 规划方案

**目标版本**: v0.7.0  
**核心主题**: 生产环境强化与生态扩展

---

## 🎯 核心目标

### 1. REST API 业务逻辑完整化 (✅ 部分完成)

- **目标**: 将目前的 API 桩代码替换为真实的业务逻辑。
- **已完成**:
    - 实现了统一的 RFC 7807 错误响应系统。
    - 建立了嵌套路由结构并集成了 API Key 认证中间件。
    - 强化了账户创建、订单管理和证书管理的 API 处理器。
- **待完成**:
    - 与 `RenewalScheduler` 的深度集成，支持通过 API 触发手动强制续期。

### 2. OCSP 实时状态验证 (✅ 已完成)

- **目标**: 增强证书链验证的安全性。
- **已实现**:
    - 在 `src/certificate/ocsp.rs` 中实现了 OCSP 响应器 URL 的查找。
    - 在 `CertificateChain` 中集成了 `verify_deep()` 方法，支持实时 OCSP 状态检查。

### 3. DNS 提供商生态扩展 (✅ 已完成)

- **目标**: 支持更多国内外主流云服务商。
- **已实现**:
    - 补全了华为云 (Huawei Cloud) 和 CloudNS 的提供商骨架。
    - 统一了所有 DNS 提供商的特征门控 (Feature Gating) 与重新导出逻辑。

### 4. 系统安全性增强 (✅ 新增)

- **已实现**:
    - 引入了 `X-API-Key` 认证机制，保护敏感的管理端点。
    - `AppState` 现在支持跨请求共享 `AcmeClient` 实例。

---

## 🏗 架构变动预告

- **Orchestrator 增强**: 为 `Orchestrator` trait 增加 `status()` 和 `cancel()` 方法，支持异步任务的细粒度控制。
- **错误代码统一**: 将 `AcmeError` 细化，支持导出符合 RFC 7807 (Problem Details for HTTP APIs) 标准的错误响应。

---

## 📅 时间线

- **第一周**: API 逻辑深度整合。
- **第二周**: OCSP 与证书解析优化。
- **第三周**: 新 DNS 提供商集成。
- **第四周**: 稳定性测试与 v0.7.0 发布。
