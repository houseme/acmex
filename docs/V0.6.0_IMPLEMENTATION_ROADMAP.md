# AcmeX v0.6.0+ åŠŸèƒ½å®ç°æŒ‡å—

**ç¼–å†™æ—¥æœŸ**: 2026-02-07  
**ç›®æ ‡ç‰ˆæœ¬**: v0.6.0, v0.7.0, v1.0.0  
**æŒ‡å¯¼çº§åˆ«**: è¯¦ç»†å®ç°æ­¥éª¤

---

## ğŸ“‹ å¿«é€Ÿç´¢å¼•

### æŒ‰ä¼˜å…ˆçº§

1. [ä¼˜å…ˆçº§ 1: æ ¸å¿ƒåŠŸèƒ½è¡¥å®Œ](#ä¼˜å…ˆçº§-1-æ ¸å¿ƒåŠŸèƒ½è¡¥å®Œ) - æœ€ç´§æ€¥
2. [ä¼˜å…ˆçº§ 2: åŠŸèƒ½å®Œæ•´æ€§](#ä¼˜å…ˆçº§-2-åŠŸèƒ½å®Œæ•´æ€§) - é‡è¦
3. [ä¼˜å…ˆçº§ 3: æ€§èƒ½ä¼˜åŒ–](#ä¼˜å…ˆçº§-3-æ€§èƒ½ä¼˜åŒ–) - æ¬¡è¦
4. [ä¼˜å…ˆçº§ 4: å¯é€‰åŠŸèƒ½](#ä¼˜å…ˆçº§-4-å¯é€‰åŠŸèƒ½) - å¢å¼º

### æŒ‰æ—¶é—´çº¿

1. [v0.6.0 çŸ­æœŸ](#v06-çŸ­æœŸ-2-3å‘¨) - 2-3 å‘¨
2. [v0.7.0 ä¸­æœŸ](#v07-ä¸­æœŸ-3-4å‘¨) - 3-4 å‘¨
3. [v1.0.0 é•¿æœŸ](#v10-é•¿æœŸ-4-5å‘¨) - 4-5 å‘¨

---

## ğŸ¯ ä¼˜å…ˆçº§ 1: æ ¸å¿ƒåŠŸèƒ½è¡¥å®Œ

### 1.1 Account Key Rollover (å¯†é’¥è½®æ¢)

**æ–‡ä»¶**: `src/account/key_rollover.rs` (æ–°å¢)  
**è¡Œæ•°**: 150 è¡Œ  
**æ—¶é—´**: 2-3 å°æ—¶  
**éš¾åº¦**: ä¸­

**ç”¨é€”**: å…è®¸ç”¨æˆ·å®šæœŸæ›´æ¢è´¦æˆ·å¯†é’¥ï¼Œæé«˜å®‰å…¨æ€§

**æ ¸å¿ƒå®ç°**:

```rust
pub struct KeyRollover {
    account: Account,
    new_key_pair: KeyPair,
}

impl KeyRollover {
    pub async fn execute(&self) -> Result<Account> {
        // 1. åˆ›å»º keyChange è¯·æ±‚
        let key_change = self.create_key_change_request()?;

        // 2. ç”¨æ–°å¯†é’¥ç­¾å
        let jws = self.sign_with_new_key(&key_change).await?;

        // 3. æäº¤åˆ° ACME æœåŠ¡å™¨
        let response = self.submit_to_server(&jws).await?;

        // 4. éªŒè¯è¿”å›
        self.verify_response(&response)?;

        Ok(self.account.clone())
    }
}
```

**æ­¥éª¤æ¸…å•**:

- [ ] åˆ›å»ºæ–‡ä»¶å’Œç»“æ„ä½“
- [ ] å®ç°è¯·æ±‚æ„å»º
- [ ] å®ç°ç­¾åé€»è¾‘
- [ ] å®ç°æœåŠ¡å™¨æäº¤
- [ ] å®ç°å“åº”éªŒè¯
- [ ] å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•
- [ ] æ–‡æ¡£ç¤ºä¾‹

---

### 1.2 Certificate Revocation (è¯ä¹¦åŠé”€)

**æ–‡ä»¶**: `src/order/revocation.rs` (æ–°å¢)  
**è¡Œæ•°**: 120 è¡Œ  
**æ—¶é—´**: 2-3 å°æ—¶  
**éš¾åº¦**: ä¸­

**æ ¸å¿ƒå®ç°**:

```rust
#[repr(u8)]
pub enum RevocationReason {
    Unspecified = 0,
    KeyCompromise = 1,
    CACompromise = 2,
    AffiliationChanged = 3,
    Superseded = 4,
    CessationOfOperation = 5,
    CertificateHold = 6,
    RemoveFromCRL = 8,
    PrivilegeWithdrawn = 9,
    AACompromise = 10,
}

pub struct CertificateRevocation {
    certificate: Certificate,
    reason: RevocationReason,
}

impl CertificateRevocation {
    pub async fn revoke(&self) -> Result<()> {
        // æ„å»ºåŠé”€è¯·æ±‚
        // ç­¾å
        // æäº¤
        // éªŒè¯
        todo!()
    }
}
```

**æ­¥éª¤æ¸…å•**:

- [ ] å®šä¹‰åŠé”€åŸå› æšä¸¾
- [ ] å®ç°è¯·æ±‚æ„å»º
- [ ] å®ç°ç­¾åå’Œæäº¤
- [ ] å®ç°å“åº”å¤„ç†
- [ ] é”™è¯¯å¤„ç†
- [ ] å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•

---

### 1.3 Orchestrator Framework (ç¼–æ’æ¡†æ¶)

**ç›®å½•**: `src/orchestrator/` (æ–°å¢)  
**æ–‡ä»¶æ•°**: 4 ä¸ª (mod.rs, provisioner.rs, validator.rs, renewer.rs)  
**è¡Œæ•°**: 400 è¡Œ  
**æ—¶é—´**: 4-5 å°æ—¶  
**éš¾åº¦**: ä¸­é«˜

**æ ¸å¿ƒè®¾è®¡**:

```rust
// src/orchestrator/mod.rs
pub trait Orchestrator: Send + Sync {
    async fn execute(&self) -> Result<()>;
    fn progress(&self) -> f32;
    async fn cancel(&self) -> Result<()>;
}

// src/orchestrator/provisioner.rs - è¯ä¹¦ç”³è¯·æµç¨‹
pub struct Provisioner {
    // ç¼–æ’è¯ä¹¦ç”³è¯·
}

impl Provisioner {
    pub async fn execute(&self) -> Result<CertificateBundle> {
        // 1. åˆ›å»ºè®¢å•
        // 2. è·å–æˆæƒ
        // 3. æ‰§è¡ŒæŒ‘æˆ˜
        // 4. éªŒè¯æŒ‘æˆ˜
        // 5. å®Œæˆè®¢å•
        // 6. è·å–è¯ä¹¦
        todo!()
    }
}

// src/orchestrator/validator.rs - éªŒè¯ç¼–æ’
pub struct Validator {
    // ç¼–æ’éªŒè¯æµç¨‹
}

// src/orchestrator/renewer.rs - ç»­æœŸç¼–æ’
pub struct Renewer {
    // ç¼–æ’ç»­æœŸæµç¨‹
}
```

**æ­¥éª¤æ¸…å•**:

- [ ] åˆ›å»ºç›®å½•ç»“æ„
- [ ] å®šä¹‰ Orchestrator trait
- [ ] å®ç° Provisioner
- [ ] å®ç° Validator
- [ ] å®ç° Renewer
- [ ] å®Œæ•´æµ‹è¯•
- [ ] é›†æˆåˆ° client
- [ ] æ–‡æ¡£å’Œç¤ºä¾‹

---

## ğŸ¯ ä¼˜å…ˆçº§ 2: åŠŸèƒ½å®Œæ•´æ€§

### 2.1 TLS-ALPN-01 Support

**ç›®å½•**: `src/challenge/tls_alpn01/` (æ–°å¢)  
**æ–‡ä»¶æ•°**: 3 ä¸ª  
**è¡Œæ•°**: 300 è¡Œ  
**æ—¶é—´**: 5-6 å°æ—¶  
**éš¾åº¦**: é«˜

**æ ¸å¿ƒæ¦‚å¿µ**:

- ç”ŸæˆåŒ…å«å¯†é’¥æˆæƒå€¼çš„è‡ªç­¾åè¯ä¹¦
- å¯åŠ¨ TLS æœåŠ¡å™¨ç›‘å¬ 443 ç«¯å£
- å“åº”å¸¦æœ‰ç‰¹å®š SNI çš„ ALPN è¿æ¥
- ACME æœåŠ¡å™¨éªŒè¯è¯ä¹¦å’Œ SNI

**å®ç°ç»“æ„**:

```rust
pub struct TlsAlpn01Solver {
    domain: String,
    token: String,
    key_authorization: String,
}

impl TlsAlpn01Solver {
    pub async fn present(&mut self) -> Result<()> {
        // 1. ç”Ÿæˆè‡ªç­¾åè¯ä¹¦
        // 2. å¯åŠ¨ TLS æœåŠ¡å™¨
        // 3. ç»‘å®š SNI
        // 4. ç­‰å¾…éªŒè¯
    }

    pub async fn cleanup(&mut self) -> Result<()> {
        // å…³é—­æœåŠ¡å™¨
        // æ¸…ç†èµ„æº
    }
}
```

**æ­¥éª¤æ¸…å•**:

- [ ] åˆ›å»ºè‡ªç­¾åè¯ä¹¦ç”Ÿæˆæ¨¡å—
- [ ] åˆ›å»º TLS æœåŠ¡å™¨æ¨¡å—
- [ ] å®ç° ALPN å¤„ç†
- [ ] å®ç° ChallengeSolver
- [ ] é”™è¯¯å¤„ç†
- [ ] å®Œæ•´æµ‹è¯•
- [ ] æ–‡æ¡£å’Œç¤ºä¾‹

---

### 2.2 Advanced CLI Commands

**æ–‡ä»¶**: `src/cli/commands/{account,order,cert,serve}.rs` (æ‰©å±•/æ–°å¢)  
**è¡Œæ•°**: 400 è¡Œ  
**æ—¶é—´**: 4-5 å°æ—¶  
**éš¾åº¦**: ä¸­

**è®¡åˆ’å‘½ä»¤**:

```bash
# è´¦æˆ·ç®¡ç†
acmex account create --email user@example.com
acmex account show
acmex account update --contacts mailto:admin@example.com
acmex account key-rollover
acmex account deactivate

# è¯ä¹¦ç®¡ç†
acmex cert new --domains example.com,*.example.com --challenge dns-01
acmex cert list [--filter expiring-soon]
acmex cert show --cert-id abc123
acmex cert renew --cert-id abc123
acmex cert revoke --cert-id abc123 --reason key-compromise

# è®¢å•ç®¡ç†
acmex order list
acmex order show --order-id xyz
acmex order cancel --order-id xyz

# æœåŠ¡å™¨
acmex serve --port 8443
```

**æ­¥éª¤æ¸…å•**:

- [ ] å®ç°è´¦æˆ·å‘½ä»¤
- [ ] å®ç°è¯ä¹¦å‘½ä»¤
- [ ] å®ç°è®¢å•å‘½ä»¤
- [ ] å®ç°æœåŠ¡å™¨å‘½ä»¤
- [ ] å‚æ•°éªŒè¯
- [ ] è¾“å‡ºæ ¼å¼åŒ–
- [ ] é”™è¯¯å¤„ç†
- [ ] å¸®åŠ©æ–‡æ¡£

---

### 2.3 Server Mode (REST API)

**ç›®å½•**: `src/server/` (æ–°å¢)  
**æ–‡ä»¶æ•°**: 3 ä¸ª (api.rs, webhook.rs, health.rs)  
**è¡Œæ•°**: 500 è¡Œ  
**æ—¶é—´**: 6-8 å°æ—¶  
**éš¾åº¦**: é«˜

**API è®¾è®¡**:

```
è´¦æˆ·ç›¸å…³:
POST   /api/accounts
GET    /api/accounts/:id
PATCH  /api/accounts/:id
DELETE /api/accounts/:id
POST   /api/accounts/:id/key-rollover

è®¢å•ç›¸å…³:
POST   /api/orders
GET    /api/orders
GET    /api/orders/:id
POST   /api/orders/:id/finalize
DELETE /api/orders/:id

è¯ä¹¦ç›¸å…³:
GET    /api/certificates
GET    /api/certificates/:id
POST   /api/certificates/:id/renew
POST   /api/certificates/:id/revoke

ç³»ç»Ÿ:
GET    /health
GET    /metrics
```

**æ­¥éª¤æ¸…å•**:

- [ ] è®¾ç½® Axum æ¡†æ¶
- [ ] å®ç°è·¯ç”±
- [ ] å®ç°å¤„ç†å™¨
- [ ] é”™è¯¯å¤„ç†
- [ ] è¯·æ±‚éªŒè¯
- [ ] å“åº”æ ¼å¼åŒ–
- [ ] é›†æˆæµ‹è¯•
- [ ] API æ–‡æ¡£

---

## ğŸ¯ ä¼˜å…ˆçº§ 3: æ€§èƒ½ä¼˜åŒ–

### 3.1 Certificate Chain Verification

**æ–‡ä»¶**: `src/certificate/chain.rs` (æ–°å¢)  
**è¡Œæ•°**: 250 è¡Œ  
**æ—¶é—´**: 3-4 å°æ—¶  
**éš¾åº¦**: ä¸­é«˜

**æ ¸å¿ƒåŠŸèƒ½**:

```rust
pub struct CertificateChain {
    certificates: Vec<Certificate>,
}

impl CertificateChain {
    pub fn verify(&self) -> Result<()> {
        // éªŒè¯é“¾ä¸­æ¯ä¸ªè¯ä¹¦
        // éªŒè¯ç­¾åé“¾
        // éªŒè¯æœ‰æ•ˆæœŸ
        // éªŒè¯å¯†é’¥ç”¨æ³•
    }

    pub async fn get_ocsp_response(&self) -> Result<Vec<u8>> {
        // è·å– OCSP å“åº”
    }
}
```

---

### 3.2 Nonce Pool Management

**æ–‡ä»¶**: `src/protocol/nonce_pool.rs` (æ–°å¢)  
**è¡Œæ•°**: 150 è¡Œ  
**æ—¶é—´**: 1-2 å°æ—¶  
**éš¾åº¦**: ä½

**æ ¸å¿ƒåŠŸèƒ½**:

```rust
pub struct NoncePool {
    nonces: VecDeque<String>,
    min_size: usize,
}

impl NoncePool {
    pub async fn get_or_fetch(&mut self) -> Result<String> {
        // ä»æ± ä¸­è·å–ï¼Œä¸è¶³åˆ™è¡¥å……
    }
}
```

---

### 3.3 Advanced Event Tracking

**æ–‡ä»¶**: `src/metrics/events.rs` (æ–°å¢)  
**è¡Œæ•°**: 200 è¡Œ  
**æ—¶é—´**: 2-3 å°æ—¶  
**éš¾åº¦**: ä½

---

## ğŸ“… å®ç°æ—¶é—´çº¿

### v0.6.0 (2-3 å‘¨) â­ ä¼˜å…ˆ

- [ ] Account Key Rollover (2-3h)
- [ ] Certificate Revocation (2-3h)
- [ ] Orchestrator Framework (4-5h)
- [ ] Advanced CLI (4-5h)
- [ ] æµ‹è¯•å’Œæ–‡æ¡£ (3-4h)

**æ€»è®¡**: 15-20 å°æ—¶

### v0.7.0 (3-4 å‘¨)

- [ ] TLS-ALPN-01 (5-6h)
- [ ] Server Mode (6-8h)
- [ ] é«˜çº§ CLI å®Œå–„ (2-3h)
- [ ] æ€§èƒ½ä¼˜åŒ– (4-5h)

**æ€»è®¡**: 17-22 å°æ—¶

### v1.0.0 (ç”Ÿäº§å°±ç»ª)

- å®Œæ•´åŠŸèƒ½æµ‹è¯•
- å®‰å…¨å®¡è®¡
- æ€§èƒ½åŸºå‡†
- æ–‡æ¡£å®Œå–„

---

## ğŸ”— ç›¸å…³æ–‡æ¡£é“¾æ¥

- [UNIMPLEMENTED_FEATURES.md](./UNIMPLEMENTED_FEATURES.md) - å®Œæ•´åŠŸèƒ½æ¸…å•
- [ARCHITECTURE.md](./ARCHITECTURE.md) - æ¶æ„è®¾è®¡
- [V0.5.0_COMPLETION_REPORT.md](./V0.5.0_COMPLETION_REPORT.md) - å½“å‰ç‰ˆæœ¬è¿›åº¦

---

**ç‰ˆæœ¬**: v1.0  
**ç”Ÿæˆæ—¥æœŸ**: 2026-02-07


