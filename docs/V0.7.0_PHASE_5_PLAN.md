# AcmeX Phase 5: 测试、文档与发布准备实现计划

**版本**: v0.7.0-beta  
**日期**: 2026-02-08  
**目标**: 确保 Phase 4 功能的稳定性，完善开发者文档，达到发布标准。

---

## 1. 自动化测试体系建设

### 1.1 集成测试 (Integration Tests)

- **目标**: 模拟真实的 ACME 交互流程。
- **任务**:
    - [ ] 创建 `tests/common/` 目录，包含 `MockAcmeServer` 工具。
    - [ ] 编写 `tests/account_test.rs`: 测试注册、密钥轮换、停用。
    - [ ] 编写 `tests/order_test.rs`: 测试完整订单流程（验证 -> 签发 -> 下载）。
    - [ ] 编写 `tests/api_test.rs`: 测试 REST API 认证、异步任务、续期触发。

### 1.2 DNS Provider 模拟测试

- **任务**:
    - [ ] 为 Route53, Huawei, Alibaba 等物理 Provider 编写 mock 请求测试，确保 `create_txt_record` 和 `delete_txt_record`
      的请求构造正确。

### 1.3 性能与并发测试

- **任务**:
    - [ ] 编写基准测试 (`benches/`)：ACME 签名性能、Nonce 池补给速度。
    - [ ] 压力测试：模拟 50 个并发域名同时申请挑战。

---

## 2. 文档全面升级

### 2.1 开发者指南补全

- **任务**:
    - [ ] 更新 `docs/ARCHITECTURE.md`: 增加 Phase 4 引入的 `Orchestrator` 异步状态机说明。
    - [ ] 编写 `docs/OBSERVABILITY.md`: 说明如何配置 OTLP 和 Prometheus 指标。
    - [ ] 更新 `README.md`: 展示新的 API 调用示例和 CLI 服务器命令。

### 2.2 API 定义

- **任务**:
    - [ ] 生成 OpenAPI 3.0 定义文件，描述项目提供的所有 REST API 端点。

---

## 3. 代码质量与优化

### 3.1 警告与 Lint 修复

- **任务**:
    - [ ] 运行 `cargo clippy` 并修复所有建议。
    - [ ] 清理未使用的依赖项和 `dead_code`。

### 3.2 错误信息完善

- [ ] 统一所有 `ProblemDetails` 的 `instance` 和 `type` 链接。

---

## 4. 发布准备 (v0.7.0)

- [ ] 更新 `Cargo.toml` 版本号。
- [ ] 编写 `RELEASE_NOTES_v0.7.0.md`。
- [ ] 运行 `verify_build.sh` 确保所有 feature 组合均可编译。

